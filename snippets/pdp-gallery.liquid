{% liquid
  assign sticky = sticky | default: false
%}
<div id="galleryWrap" class="stick-wrap"{% if sticky %} data-sticky{% endif %}>
  <div id="galleryCard" class="product-media-card pdp-gallery" data-gallery data-product-id="{{ product.id }}">
    <div class="pdp-gallery__media" data-media>
      {% for media in product.media %}
        <div class="pdp-gallery__slide" id="Media-{{ media.id }}" data-index="{{ forloop.index0 }}" style="--aspect-ratio: {{ media.preview_image.aspect_ratio | default: 1 }}"{% if forloop.first %} data-active="true"{% endif %}>
          {{ media | media_tag: image_size: 'master', loading: forloop.first ? 'eager' : 'lazy', fetchpriority: forloop.first ? 'high' : 'low', sizes: '(min-width: 990px) 720px, 92vw' }}
        </div>
      {% endfor %}
      <button class="pdp-gallery__ctrl pdp-gallery__ctrl--prev" data-prev aria-label="{{ 'accessibility.previous' | t }}" hidden>{% render 'icon-caret-left' %}</button>
      <button class="pdp-gallery__ctrl pdp-gallery__ctrl--next" data-next aria-label="{{ 'accessibility.next' | t }}" hidden>{% render 'icon-caret-right' %}</button>
    </div>
    <div class="pdp-gallery__thumbs" role="tablist" aria-label="{{ 'products.product.media' | t }}" data-thumbs>
      {% for media in product.media %}
        <button class="pdp-gallery__thumb" role="tab" aria-controls="Media-{{ media.id }}" aria-selected="{{ forloop.first }}" data-index="{{ forloop.index0 }}" type="button">
          {{ media | image_url: width: 220 | image_tag: class: 'pdp-gallery__thumb-img', loading: 'lazy', decoding: 'async' }}
        </button>
      {% endfor %}
    </div>
  </div>
</div>
